# 电功率预测项目 - 数据整理文档

## 项目概述

本项目用于处理和整理电功率时间序列数据,目标是建立一个时间序列预测模型,根据日期时间预测generationPower(发电功率)。

## 数据来源

原始数据来自6个JSON文件,包含2024年6月1日至6月6日的发电功率数据:
- 772_2024-06-01.json
- 772_2024-06-02.json
- 772_2024-06-03.json
- 772_2024-06-04.json
- 772_2024-06-05.json
- 772_2024-06-06.json

## 数据处理

### 原始数据问题

1. **时间间隔不规律**: 虽然理想情况是5分钟间隔,但实际数据点的时间戳并不准确
2. **数据缺失**: 每天的数据点数量不是标准的288个(24小时 × 12个5分钟)
3. **数据不连续**: 某些时间段完全没有数据

### 处理方法

使用 `process_data.py` 脚本进行数据处理:

1. **数据提取**: 从JSON文件中提取datetime和generationPower
2. **时间对齐**: 将数据重采样到标准的5分钟间隔
3. **缺失填充**: 使用线性插值方法填充缺失的数据点
4. **特征工程**: 添加时间相关特征(年、月、日、小时、分钟、星期几等)

## 处理后的数据文件

### 1. simple_power_data.csv
- 简化版数据,只包含两列:
  - `datetime`: 时间戳(标准5分钟间隔)
  - `generationPower`: 发电功率(W)
- 适合快速查看和简单分析

### 2. processed_power_data.csv / training_data.csv
- 完整版数据,包含所有特征:
  - `datetime`: 时间戳
  - `generationPower`: 发电功率
  - `year`: 年份
  - `month`: 月份
  - `day`: 日期
  - `hour`: 小时
  - `minute`: 分钟
  - `dayofweek`: 星期几(0=周一, 6=周日)
  - `dayofyear`: 一年中的第几天
  - `time_idx`: 时间索引(从起始时间开始的分钟数)
- 适合用于机器学习模型训练

## 数据统计

### 基本信息
- **总数据点**: 1,606个
- **时间跨度**: 2024-05-31 21:50:00 至 2024-06-06 11:35:00(5天13小时)
- **时间间隔**: 标准5分钟

### 发电功率统计
- **平均值**: 5,334.51 W
- **中位数**: 1,594.94 W
- **标准差**: 8,219.97 W
- **最小值**: 0.00 W
- **最大值**: 44,847.79 W

### 数据质量
- **零功率数据点**: 530个(33.00%)
  - 这是正常的,因为夜间或其他时段可能没有发电
- **每天平均数据点**: 229.4个
  - 理论值: 288个(24小时 × 12个5分钟)
  - 实际数据略少于理论值,但通过插值已经规范化

## 使用脚本

### 1. 数据处理脚本
```bash
python process_data.py
```
功能:
- 读取所有JSON文件
- 处理并规范化数据
- 生成三个CSV文件

### 2. 数据可视化脚本
```bash
python visualize_data.py
```
功能:
- 生成时间序列图
- 生成每日功率分布图
- 生成功率分布直方图
- 输出文件: `power_data_visualization.png`

## 数据分析发现

### 发电模式
从每小时平均功率分析来看:
- **峰值时段**: 04:00-06:00(凌晨4-6点),平均功率15,263-17,030 W
- **次峰时段**: 00:00-03:00(午夜到凌晨3点),平均功率5,120-12,497 W
- **低谷时段**: 12:00-21:00(中午到晚上9点),平均功率34-246 W

这个模式表明:
1. 该发电站可能位于西半球(时区导致峰值在当地白天)
2. 或者数据时间戳可能需要时区调整
3. 发电功率与太阳能或其他可再生能源相关

### 数据特点
- 功率变化范围大(0-45,000 W),说明存在显著的日内波动
- 33%的零功率数据点说明有较长的非发电时段
- 高标准差(8,220 W)说明数据波动性强

## 下一步建议

### 模型选择
适合这类时间序列预测的模型:
1. **传统方法**:
   - ARIMA
   - SARIMA(考虑季节性)
   - Prophet(Facebook开源)

2. **机器学习方法**:
   - XGBoost/LightGBM(使用时间特征)
   - Random Forest

3. **深度学习方法**:
   - LSTM
   - GRU
   - Transformer
   - Temporal Fusion Transformer

### 特征工程建议
可以考虑添加:
- 滞后特征(lag features): 前1小时、前1天的功率
- 滚动窗口特征: 过去1小时/6小时/24小时的平均功率
- 天气数据(如果可获得): 温度、光照、云量等
- 节假日标记
- 周期性编码(如sin/cos变换)

### 数据增强
- 收集更多天数的数据以捕捉更长期的模式
- 考虑加入外部变量(天气、季节等)

## 依赖库

```bash
pip install pandas numpy matplotlib
```

## 文件结构

```
newPower/
├── 772_2024-06-01.json          # 原始数据
├── 772_2024-06-02.json
├── 772_2024-06-03.json
├── 772_2024-06-04.json
├── 772_2024-06-05.json
├── 772_2024-06-06.json
├── process_data.py               # 数据处理脚本
├── visualize_data.py             # 可视化脚本
├── simple_power_data.csv         # 简化数据
├── processed_power_data.csv      # 完整数据
├── training_data.csv             # 训练数据(与processed相同)
├── power_data_visualization.png  # 可视化结果
└── README.md                     # 本文档
```

## 许可证

[请根据实际情况添加]

## 联系方式

[请根据实际情况添加]
